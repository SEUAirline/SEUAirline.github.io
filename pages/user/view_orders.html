<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SEUAirline - 我的订单</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- FontAwesome -->
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

  <!-- 自定义样式 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1E3A8A',
            secondary: '#3B82F6',
            accent: '#F8FAFC',
            success: '#10B981',
            warning: '#F59E0B',
            danger: '#EF4444',
            info: '#3B82F6'
          }
        }
      }
    }
  </script>

  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto { content-visibility: auto; }
      .btn-primary { 
        @apply bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 transition-all duration-300;
      }
      .btn-secondary { 
        @apply bg-white text-primary border border-primary px-4 py-2 rounded-md hover:bg-gray-50 transition-all duration-300;
      }
      .btn-outline { 
        @apply bg-white text-gray-600 border border-gray-300 px-4 py-2 rounded-md hover:bg-gray-50 transition-all duration-300;
      }
      .order-card {
        @apply bg-white rounded-lg shadow-md overflow-hidden mb-4 border border-gray-100;
      }
      .status-badge {
        @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
      }
    }
  </style>
</head>

<body class="bg-gray-50 min-h-screen">
  <!-- 导航栏 -->
  <nav class="bg-white shadow-sm sticky top-0 z-30">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <a href="javascript:void(0)" onclick="parent.switchPage('pages/user/homepage.html')"
            class="flex items-center">
            <i class="fas fa-plane text-primary text-2xl mr-2"></i>
            <span class="text-xl font-bold text-primary">SEUAirline</span>
          </a>
        </div>

        <div class="hidden md:flex space-x-8">
          <a href="javascript:void(0)" onclick="parent.switchPage('pages/user/homepage.html')"
            class="text-gray-600 hover:text-primary">首页</a>
          <a href="javascript:void(0)" onclick="parent.switchPage('pages/user/view_orders.html')"
            class="text-primary font-medium border-b-2 border-primary">我的订单</a>
          <a href="javascript:void(0)" onclick="parent.switchPage('pages/user/user_center.html')"
            class="text-gray-600 hover:text-primary">个人中心</a>
        </div>

        <div class="flex items-center space-x-4">
          <div id="user-info" class="hidden items-center space-x-2 cursor-pointer"
            onclick="if(parent && parent.switchPage){parent.switchPage('pages/user/user_center.html');}">
            <img src="https://picsum.photos/32/32" alt="用户头像" class="w-8 h-8 rounded-full">
            <span class="text-gray-700"><span id="username">游客</span> <i
                class="fas fa-id-card text-yellow-500"></i></span>
          </div>
          <button class="md:hidden text-gray-600">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- 主要内容区 -->
  <main class="container mx-auto px-4 py-6">
    <!-- 订单状态筛选 -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6 overflow-x-auto">
      <div class="flex space-x-1 md:space-x-0 md:justify-around">
        <button class="px-4 py-2 text-primary font-medium border-b-2 border-primary whitespace-nowrap">
          全部订单
        </button>
        <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap">
          待支付
        </button>
        <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap">
          已支付
        </button>
        <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap">
          已出票
        </button>
        <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap">
          已完成
        </button>
        <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap">
          已取消
        </button>
        <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap">
          退票/改签
        </button>
      </div>
    </div>

    <!-- 搜索和筛选 -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
      <div class="flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4">
        <div class="flex-1 relative">
          <input type="text"
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"
            placeholder="搜索订单号/航班号/乘客姓名">
          <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        </div>
        <div class="flex space-x-3">
          <div class="relative">
            <select
              class="pl-3 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all appearance-none">
              <option>全部时间</option>
              <option>近一周</option>
              <option>近一月</option>
              <option>近三月</option>
              <option>自定义</option>
            </select>
            <i
              class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
          </div>
          <button class="btn-outline">
            <i class="fas fa-filter mr-1"></i> 筛选
          </button>
        </div>
      </div>
    </div>

    <!-- 订单列表 -->
    <div class="space-y-4">
      <!-- 订单1：已出票 -->
      <div class="order-card" data-order-id="SA20240120001">
        <div class="p-4">
          <div class="flex justify-between items-center mb-3">
            <div class="flex items-center">
              <span class="text-gray-500 text-sm">订单号：SA20240120001</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="text-gray-500 text-sm">2024-01-20 14:30</span>
            </div>
            <span class="status-badge bg-blue-100 text-blue-800">
              <i class="fas fa-check-circle mr-1"></i> 已出票
            </span>
          </div>

          <div class="border-t border-b border-gray-100 py-3 my-3">
            <div class="flex flex-wrap justify-between">
              <div class="flex items-center mb-2 md:mb-0">
                <div class="text-center mr-4">
                  <div class="text-lg font-bold text-gray-800">08:00</div>
                  <div class="text-xs text-gray-500 mt-1">北京首都 T2</div>
                </div>

                <div class="flex flex-col items-center mr-4">
                  <div class="text-xs text-gray-500">2h20m</div>
                  <div class="relative w-24 h-0.5 my-1">
                    <div class="absolute left-0 right-0 top-0 flex justify-between items-center">
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                      <div class="absolute left-1/2 transform -translate-x-1/2 hidden md:block"><i
                          class="fas fa-plane text-primary transform rotate-45"></i></div>
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                    </div>
                  </div>
                  <div class="text-xs text-gray-500">直飞</div>
                </div>

                <div class="text-center">
                  <div class="text-lg font-bold text-gray-800">10:20</div>
                  <div class="text-xs text-gray-500 mt-1">上海浦东 T1</div>
                </div>
              </div>

              <div class="text-right">
                <div class="text-sm font-medium">CA1234</div>
                <div class="text-xs text-gray-500 mt-1">2024-01-20</div>
                <div class="text-xs text-gray-500">经济舱</div>
              </div>
            </div>

            <div class="mt-3 text-sm">
              <span class="text-gray-500">乘客：</span>
              <span class="text-gray-800">张三</span>
            </div>
          </div>

          <div class="flex justify-between items-center">
            <div class="text-sm">
              <span class="text-gray-500">共1人</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="font-medium">¥1,150.00</span>
            </div>
            <div class="flex space-x-2">
              <button class="btn-outline py-1 px-3 text-sm">
                查看详情
              </button>
              <button class="btn-secondary py-1 px-3 text-sm">
                <i class="fas fa-check-square-o mr-1"></i> 在线值机
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 订单2：待支付 -->
      <div class="order-card" data-order-id="SA20240119002">
        <div class="p-4">
          <div class="flex justify-between items-center mb-3">
            <div class="flex items-center">
              <span class="text-gray-500 text-sm">订单号：SA20240119002</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="text-gray-500 text-sm">2024-01-19 20:15</span>
            </div>
            <span class="status-badge bg-yellow-100 text-yellow-800">
              <i class="fas fa-clock mr-1"></i> 待支付
            </span>
          </div>

          <div class="border-t border-b border-gray-100 py-3 my-3">
            <div class="flex flex-wrap justify-between">
              <div class="flex items-center mb-2 md:mb-0">
                <div class="text-center mr-4">
                  <div class="text-lg font-bold text-gray-800">15:30</div>
                  <div class="text-xs text-gray-500 mt-1">上海虹桥 T2</div>
                </div>

                <div class="flex flex-col items-center mr-4">
                  <div class="text-xs text-gray-500">3h45m</div>
                  <div class="relative w-24 h-0.5 my-1">
                    <div class="absolute left-0 right-0 top-0 flex justify-between items-center">
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                      <div class="absolute left-1/2 transform -translate-x-1/2 hidden md:block"><i
                          class="fas fa-plane text-primary transform rotate-45"></i></div>
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                    </div>
                  </div>
                  <div class="text-xs text-gray-500">直飞</div>
                </div>

                <div class="text-center">
                  <div class="text-lg font-bold text-gray-800">19:15</div>
                  <div class="text-xs text-gray-500 mt-1">广州白云 T1</div>
                </div>
              </div>

              <div class="text-right">
                <div class="text-sm font-medium">MU5312</div>
                <div class="text-xs text-gray-500 mt-1">2024-01-25</div>
                <div class="text-xs text-gray-500">经济舱</div>
              </div>
            </div>

            <div class="mt-3 text-sm">
              <span class="text-gray-500">乘客：</span>
              <span class="text-gray-800">张三</span>
            </div>
          </div>

          <div class="flex justify-between items-center">
            <div class="text-sm">
              <span class="text-gray-500">共1人</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="font-medium">¥1,380.00</span>
              <span class="ml-2 text-xs text-yellow-500">
                <i class="fas fa-exclamation-circle mr-1"></i>剩余15:20支付
              </span>
            </div>
            <div class="flex space-x-2">
              <button class="btn-outline py-1 px-3 text-sm">
                查看详情
              </button>
              <button class="btn-primary py-1 px-3 text-sm">
                立即支付
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 订单3：已完成 -->
      <div class="order-card" data-order-id="SA20240115003">
        <div class="p-4">
          <div class="flex justify-between items-center mb-3">
            <div class="flex items-center">
              <span class="text-gray-500 text-sm">订单号：SA20240115003</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="text-gray-500 text-sm">2024-01-15 10:20</span>
            </div>
            <span class="status-badge bg-green-100 text-green-800">
              <i class="fas fa-check-circle mr-1"></i> 已完成
            </span>
          </div>

          <div class="border-t border-b border-gray-100 py-3 my-3">
            <div class="flex flex-wrap justify-between">
              <div class="flex items-center mb-2 md:mb-0">
                <div class="text-center mr-4">
                  <div class="text-lg font-bold text-gray-800">09:15</div>
                  <div class="text-xs text-gray-500 mt-1">杭州萧山</div>
                </div>

                <div class="flex flex-col items-center mr-4">
                  <div class="text-xs text-gray-500">1h40m</div>
                  <div class="relative w-24 h-0.5 my-1">
                    <div class="absolute left-0 right-0 top-0 flex justify-between items-center">
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                      <div class="absolute left-1/2 transform -translate-x-1/2 hidden md:block"><i
                          class="fas fa-plane text-primary transform rotate-45"></i></div>
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                    </div>
                  </div>
                  <div class="text-xs text-gray-500">直飞</div>
                </div>

                <div class="text-center">
                  <div class="text-lg font-bold text-gray-800">10:55</div>
                  <div class="text-xs text-gray-500 mt-1">北京首都 T3</div>
                </div>
              </div>

              <div class="text-right">
                <div class="text-sm font-medium">CZ3987</div>
                <div class="text-xs text-gray-500 mt-1">2024-01-18</div>
                <div class="text-xs text-gray-500">经济舱</div>
              </div>
            </div>

            <div class="mt-3 text-sm">
              <span class="text-gray-500">乘客：</span>
              <span class="text-gray-800">张三, 李四</span>
            </div>
          </div>

          <div class="flex justify-between items-center">
            <div class="text-sm">
              <span class="text-gray-500">共2人</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="font-medium">¥2,180.00</span>
            </div>
            <div class="flex space-x-2">
              <button class="btn-outline py-1 px-3 text-sm">
                查看详情
              </button>
              <button class="btn-secondary py-1 px-3 text-sm">
                <i class="fas fa-ticket-alt mr-1"></i> 再次预订
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 订单4：已取消 -->
      <div class="order-card" data-order-id="SA20240110004">
        <div class="p-4">
          <div class="flex justify-between items-center mb-3">
            <div class="flex items-center">
              <span class="text-gray-500 text-sm">订单号：SA20240110004</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="text-gray-500 text-sm">2024-01-10 16:45</span>
            </div>
            <span class="status-badge bg-gray-100 text-gray-800">
              <i class="fas fa-times-circle mr-1"></i> 已取消
            </span>
          </div>

          <div class="border-t border-b border-gray-100 py-3 my-3">
            <div class="flex flex-wrap justify-between">
              <div class="flex items-center mb-2 md:mb-0">
                <div class="text-center mr-4">
                  <div class="text-lg font-bold text-gray-800">19:40</div>
                  <div class="text-xs text-gray-500 mt-1">成都双流</div>
                </div>

                <div class="flex flex-col items-center mr-4">
                  <div class="text-xs text-gray-500">2h50m</div>
                  <div class="relative w-24 h-0.5 my-1">
                    <div class="absolute left-0 right-0 top-0 flex justify-between items-center">
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                      <div class="absolute left-1/2 transform -translate-x-1/2 hidden md:block"><i
                          class="fas fa-plane text-primary transform rotate-45"></i></div>
                      <div class="w-1.5 h-1.5 bg-primary rounded-full -mt-0.5"></div>
                    </div>
                  </div>
                  <div class="text-xs text-gray-500">直飞</div>
                </div>

                <div class="text-center">
                  <div class="text-lg font-bold text-gray-800">22:30</div>
                  <div class="text-xs text-gray-500 mt-1">北京大兴</div>
                </div>
              </div>

              <div class="text-right">
                <div class="text-sm font-medium">3U8888</div>
                <div class="text-xs text-gray-500 mt-1">2024-01-12</div>
                <div class="text-xs text-gray-500">经济舱</div>
              </div>
            </div>

            <div class="mt-3 text-sm">
              <span class="text-gray-500">乘客：</span>
              <span class="text-gray-800">张三</span>
            </div>
          </div>

          <div class="flex justify-between items-center">
            <div class="text-sm">
              <span class="text-gray-500">共1人</span>
              <span class="mx-2 text-gray-300">|</span>
              <span class="font-medium">¥1,280.00</span>
            </div>
            <div class="flex space-x-2">
              <button class="btn-outline py-1 px-3 text-sm">
                查看详情
              </button>
              <button class="btn-secondary py-1 px-3 text-sm">
                <i class="fas fa-ticket-alt mr-1"></i> 再次预订
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 分页 -->
    <div class="flex justify-center mt-8">
      <nav class="inline-flex rounded-md shadow">
        <a href="#"
          class="px-3 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
          <i class="fas fa-chevron-left"></i>
        </a>
        <a href="#" class="px-3 py-2 border-t border-b border-gray-300 bg-primary text-sm font-medium text-white">1</a>
        <a href="#"
          class="px-3 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">2</a>
        <a href="#"
          class="px-3 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">3</a>
        <span class="px-3 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700">...</span>
        <a href="#"
          class="px-3 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">8</a>
        <a href="#"
          class="px-3 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
          <i class="fas fa-chevron-right"></i>
        </a>
      </nav>
    </div>
  </main>

  <!-- JavaScript -->
  <script src="../../data/mock-api.js"></script>
  <script>
    // 获取元素
    const orderCards = document.querySelectorAll('.order-card');
    const statusTabs = document.querySelectorAll('.bg-white.rounded-lg.shadow-md.p-4.mb-6 button');

    // 订单卡片点击事件（查看详情）
    orderCards.forEach(card => {
      const viewDetailBtn = card.querySelector('.btn-outline');
      const orderId = card.dataset.orderId;

      viewDetailBtn.addEventListener('click', () => {
        // 保存要查看的订单ID
        localStorage.setItem('viewOrderId', orderId);

        // 在实际应用中，这里应该跳转到订单详情页面
        alert(`查看订单 ${orderId} 的详细信息`);
      });

      // 立即支付按钮事件
      const payBtn = card.querySelector('.btn-primary');
      if (payBtn) {
        payBtn.addEventListener('click', () => {
          localStorage.setItem('currentOrderId', orderId);
          if (parent && typeof parent.switchPage === 'function') {
            parent.switchPage('pages/user/payment.html');
          } else {
            window.location.href = 'payment.html';
          }
        });
      }
    });

    // 状态标签切换
    statusTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // 移除所有标签的选中状态
        statusTabs.forEach(t => {
          t.classList.remove('text-primary', 'font-medium', 'border-b-2', 'border-primary');
          t.classList.add('text-gray-500');
        });

        // 添加当前标签的选中状态
        tab.classList.remove('text-gray-500');
        tab.classList.add('text-primary', 'font-medium', 'border-b-2', 'border-primary');

        // 这里可以根据选中的标签筛选订单列表
        const status = tab.textContent.trim();
        filterOrdersByStatus(status);
      });
    });

    // 根据状态筛选订单
    function filterOrdersByStatus(status) {
      // 实际应用中，这里应该根据状态筛选订单
      console.log(`筛选订单状态：${status}`);

      // 简单的模拟筛选逻辑
      if (status === '全部订单') {
        orderCards.forEach(card => card.classList.remove('hidden'));
      } else if (status === '待支付') {
        orderCards.forEach(card => {
          if (card.querySelector('.status-badge').textContent.includes('待支付')) {
            card.classList.remove('hidden');
          } else {
            card.classList.add('hidden');
          }
        });
      } else if (status === '已出票') {
        orderCards.forEach(card => {
          if (card.querySelector('.status-badge').textContent.includes('已出票')) {
            card.classList.remove('hidden');
          } else {
            card.classList.add('hidden');
          }
        });
      } else if (status === '已完成') {
        orderCards.forEach(card => {
          if (card.querySelector('.status-badge').textContent.includes('已完成')) {
            card.classList.remove('hidden');
          } else {
            card.classList.add('hidden');
          }
        });
      } else if (status === '已取消') {
        orderCards.forEach(card => {
          if (card.querySelector('.status-badge').textContent.includes('已取消')) {
            card.classList.remove('hidden');
          } else {
            card.classList.add('hidden');
          }
        });
      }
    }

    // 检查用户登录状态
    function checkLoginStatus() {
      const user = MockAPI.getCurrentUser();
      if (user) {
        document.getElementById('user-info').classList.remove('hidden');
        document.getElementById('user-info').classList.add('flex');
        document.getElementById('username').textContent = user.username || '用户';
      } else {
        // 如果用户未登录，跳转到登录页面
        // window.location.href = 'javascript:void(0)'; parent.switchPage('pages/user/login.html');
      }
    }

    // 页面加载时执行
    window.addEventListener('DOMContentLoaded', () => {
      checkLoginStatus();

      // 检查是否有指定要查看的订单
      const viewOrderId = localStorage.getItem('viewOrderId');
      if (viewOrderId) {
        // 滚动到指定订单
        const targetOrder = document.querySelector(`.order-card[data-order-id="${viewOrderId}"]`);
        if (targetOrder) {
          targetOrder.scrollIntoView({ behavior: 'smooth', block: 'center' });
          // 高亮显示该订单
          targetOrder.classList.add('ring-2', 'ring-primary', 'ring-opacity-50');
        }
        // 清除viewOrderId
        localStorage.removeItem('viewOrderId');
      }
    });
  </script>
</body>

</html>